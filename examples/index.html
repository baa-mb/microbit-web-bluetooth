<html>
    <head>
        <title>micro:bit</title>
        <script type="text/javascript" src="../bundles/microbit.bundle.js"></script>
    </head>
    <body>
        <button id="find">find</button>
        <script>
            document.getElementById("find").onclick = async () => {
                const device = await microbit.requestMicrobit(window.navigator.bluetooth);
                if (device) {
                    const bit = new microbit.Microbit(device);
                    console.log(await bit.deviceInformationService.getDeviceInfo());
                    bit.ledService.setText("Scarlett's micro:bit");
                    const handler = data => console.log(data);
                    bit.buttonService.addEventListener("buttonastatechanged", handler);
                    bit.buttonService.addEventListener("buttonbstatechanged", handler);
                }
            }
        </script>
    </body>
</html>
